/* ===== Reset & Tokens ===== */
*{ box-sizing:border-box }
html,body{ height:100% }
:root{
  /* Paleta “neo-retro” */
  --bg-start:#e9f0ff;
  --bg-mid:#f6f8ff;
  --bg-end:#eef3f9;

  --ink:#0f172a;        /* texto principal */
  --muted:#475569;      /* texto suave */
  --stroke:#e5e7eb;     /* borde suave */

  --brand:#2563eb;      /* azul */
  --brand-2:#6ea8ff;    /* azul claro */
  --accent:#ffb703;     /* dorado retro */

  --card:#ffffffee;
  --shadow:0 16px 44px rgba(2,6,23,.14);
  --radius:18px;
  --radius-lg:24px;
}

body{
  margin:0;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans";
  color:var(--ink);
  /* Fondo mejorado: gradiente + patrón mínimo */
  background:
    radial-gradient(1100px 700px at 50% -10%, var(--bg-start) 0%, var(--bg-mid) 55%, var(--bg-end) 100%),
    url("data:image/svg+xml;utf8,\
      <svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 40 40' opacity='0.06'>\
        <path d='M8 8h4v4H8zM26 22h4v4h-4z' fill='%2399a9ff'/>\
      </svg>");
  background-repeat:repeat;
}

/* ===== App ===== */
.app{
  max-width:1200px;
  margin-inline:auto;
  padding:clamp(12px,2vw,22px);
  display:grid;
  gap:clamp(14px,2vw,22px);
}

/* ===== Topbar ===== */
.topbar{
  display:grid;
  grid-template-columns:1fr auto 1fr; /* spacer | title | score */
  align-items:center;
  gap:12px;
  padding:12px 16px;
  background:color-mix(in srgb, #fff 92%, transparent);
  border:1px solid var(--stroke);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
}
.topbar__title{
  margin:0;
  text-align:center;
  font: 700 clamp(26px,4.6vw,44px) "Press Start 2P", system-ui, sans-serif;
  letter-spacing:.5px;
  background:linear-gradient(120deg,#6ad1ff,#6ea8ff 55%,#7c83ff);
  -webkit-background-clip:text; background-clip:text; color:transparent;
  text-shadow:0 2px 0 rgba(255,255,255,.6);
}
.scoreboard{
  justify-self:end; display:flex; align-items:center; gap:10px;
  padding:6px 12px; background:var(--card);
  border:1px solid var(--stroke); border-radius:999px; box-shadow:0 8px 22px rgba(2,6,23,.08);
  font-family:"VT323", ui-monospace, monospace;
}
.scoreboard__label{ color:var(--muted); font-size:20px }
.scoreboard__value{ font-size:28px; letter-spacing:1px }

/* ===== Dashboard (3 columnas) ===== */
.dashboard{
  display:grid;
  grid-template-columns: minmax(260px, 1fr) minmax(320px, 560px) minmax(260px, 1fr);
  gap:clamp(14px,2vw,22px);
  align-items:start;
}

/* ===== Card base ===== */
.card{
  background:var(--card);
  border:1px solid var(--stroke);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:14px;
}
.card__title{
  margin:.2rem 0 1rem;
  font-family:"Press Start 2P", system-ui, sans-serif;
  font-size:16px; letter-spacing:.4px; text-align:center;
}

/* ===== QR ===== */
.qr{ display:grid; justify-items:center; gap:10px }
.qr img{ width:200px; height:200px; image-rendering:pixelated }
.qr__caption{
  font-family:"VT323", ui-monospace, monospace;
  font-size:22px; color:var(--muted)
}

/* ===== Juego ===== */
.game-card{ display:flex; align-items:center; justify-content:center; padding:10px }
.game-frame{
  position:relative;
  aspect-ratio: 9 / 16;
  /* Encaje perfecto por alto disponible (se setea desde JS en --vhFree) */
  height: min( var(--vhFree, 70svh), 70svh, 88vw );
  max-height: 72svh;
  width:auto; max-width:100%;
  overflow:hidden;

  border-radius:var(--radius-lg);
  border:1px solid color-mix(in srgb, #000 10%, transparent);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.4),
    0 18px 42px rgba(2,6,23,.18);
  background:
    linear-gradient(180deg, #7dc4f3 0%, #5d95e0 60%),
    radial-gradient(40% 25% at 12% 10%, rgba(255,255,255,.35), transparent 60%),
    radial-gradient(40% 25% at 88% 8%, rgba(255,255,255,.25), transparent 60%);
}
canvas{ width:100%; height:100%; display:block }

/* detalles sutiles */
.spark{
  position:absolute; width:20px; height:20px; opacity:.85; filter:drop-shadow(0 3px 3px rgba(0,0,0,.15));
  background-image:url("data:image/svg+xml;utf8,\
    <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'>\
      <path fill='%23ffcc4d' d='M12 2l2.2 5.2L20 9l-5.5 1.8L12 16l-2.5-5.2L4 9l5.8-1.8z'/>\
    </svg>");
  background-size:cover
}
.spark--tl{ top:10px; left:10px }
.spark--br{ right:10px; bottom:10px }

.hud{
  position:absolute; inset:0; pointer-events:none;
  display:grid; grid-template-rows:1fr auto;
}
.hud__hint{
  justify-self:center; align-self:end; margin-bottom:12px;
  font: 22px "VT323", ui-monospace, monospace; color:#e7eef8;
  padding:4px 10px; border-radius:8px;
  background:linear-gradient(180deg, rgba(15,23,42,.35), rgba(15,23,42,.16));
}

/* Overlay modal */
.overlay{
  position:absolute; inset:0;
  display:grid; place-items:center;
  background:linear-gradient(180deg, rgba(15,23,42,.45), rgba(15,23,42,.2));
  backdrop-filter:blur(2px);
}
.modal{
  width:min(92%,420px);
  background:var(--card);
  border:1px solid var(--stroke);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:18px 16px; text-align:center;
}
.modal__title{
  margin:.2rem 0 .25rem;
  font: 700 22px "Press Start 2P", system-ui, sans-serif;
}
.modal__text{
  margin:.25rem 0 .75rem; color:var(--muted);
  font: 22px "VT323", ui-monospace, monospace
}

.btn{
  display:inline-block; width:100%;
  padding:11px 14px; margin-top:10px;
  border:0; border-radius:12px; cursor:pointer;
  font: 24px "VT323", ui-monospace, monospace; color:#fff;
  transition:transform .08s ease, filter .15s ease;
}
.btn--primary{
  background:linear-gradient(135deg, var(--brand), var(--brand-2));
  box-shadow:0 10px 24px rgba(59,130,246,.35);
}
.btn--ghost{
  background:#eef2f6; color:var(--ink);
  border:1px solid var(--stroke); box-shadow:none;
}
.btn:hover{ filter:brightness(1.05) }
.btn:active{ transform:translateY(1px) }

/* ===== Tabla Top ===== */
.table{
  width:100%; border-collapse:collapse;
  font: 22px "VT323", ui-monospace, monospace;
}
.table th,.table td{ padding:8px 10px; border-bottom:1px solid var(--stroke) }
.table th{ color:var(--muted); font-weight:600; font-family:Inter, sans-serif; font-size:14px }
.table tr:last-child td{ border-bottom:0 }
.table td:first-child{ width:48px; color:#64748b }

/* ===== Footer ===== */
.footer{
  margin-top:4px;
  background:color-mix(in srgb, #fff 92%, transparent);
  border:1px solid var(--stroke);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  text-align:center; padding:10px 14px;
  font: 22px "VT323", ui-monospace, monospace;
}
.footer .kbd{
  padding:.1rem .4rem; border:1px solid var(--stroke); border-radius:6px;
  background:#fff; font: inherit;
}

/* ===== Responsive ===== */
@media (max-width: 980px){
  .dashboard{ grid-template-columns:1fr; }
  .game-frame{ height: min( var(--vhFree, 68svh), 68svh, 94vw ); max-height: 70svh; }
}
body{
  background: #000 !important;
}
